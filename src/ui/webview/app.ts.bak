import { VSCodeBridge } from './core/vscode-bridge';
import { TabManager } from './core/tab-manager';
import { GeneralTab } from './features/general/general-tab';
import { AgentsTab } from './features/agents/agents-tab';
import { SearchTab } from './features/search/search-tab';

class WebviewApp {
    private bridge: VSCodeBridge;
    private tabManager: TabManager;

    constructor() {
        this.bridge = VSCodeBridge.getInstance();
        this.tabManager = new TabManager();
        this.initializeFeatures();
    }

    private initializeFeatures() {
        this.tabManager.registerTabFeature('general', new GeneralTab());
        this.tabManager.registerTabFeature('agents', new AgentsTab());
        this.tabManager.registerTabFeature('search', new SearchTab());
    }

    public start() {
        this.tabManager.showTab('general');
        console.log('ðŸš€ Webview App Started - Modular Architecture');
    }
}

window.addEventListener('DOMContentLoaded', () => {
    const app = new WebviewApp();
    app.start();
});
